<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prectice</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<style>
    <!-- /* -- Crud -- */ -->
    .card {
        width: 95%;
        margin: 30px auto;
    }
    .btn-2{
        margin-left: 46%;
    }
    #nodata{
        text-align: center;
    }
</style>
<body>


    <div class="card">
        <div class="card-header">
            <a href="add.html" class="btn btn-success btn-2">Add User [+]</a>
        </div>
        <div class="card-body">
            <table class="table table-bordered" id="nodata">
                <thead class="bg-dark text-white">
                    <tr>
                        <td>Sr No.</td>
                        <td>Id</td>
                        <td>Name</td>
                        <td>Email</td>
                        <td>Password</td>
                        <td>Phone</td>
                        <td>Action</td>
                    </tr>
                </thead>
                <tbody id="datashow">
                    <!-- <tr>
                        <td>1</td>
                        <td>18</td>
                        <td>Virat Kohli</td>
                        <td>virat18@gmail.com</td>
                        <td>2323cheeku</td>
                        <td>9789056789</td>
                        <td>
                            <a href="update.html" class="btn btn-primary">Edit</a>
                            &nbsp; | &nbsp;
                            <a class="btn btn-danger">Delete</a>
                        </td>
                    </tr> -->
                </tbody>
    
            </table>
        </div>
    
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@56.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript">
        const HandleGet = () =>{
            const getdata= JSON.parse(localStorage.getItem('Js-Crud'));
            console.log('Crud Get++', getdata);

            if (getdata.length=== 0 ) {
                document.getElementById('nodata').innerHTML= 'No Data';
            }
            else{
                let tbl= "";
                
                getdata.map((i, index)=>{
                    return (
                        tbl += `
                                <tr>
                                    <td>${index + 1}.</td>
                                    <td>${i.id}</td>
                                    <td>${i.name}</td>
                                    <td>${i.email}</td>
                                    <td>${i.password}</td>
                                    <td>${i.phone}</td>
                                    <td>
                                        <a class="btn btn-primary" onclick="HandleEdit(${i.id})">Edit</a>
                                        &nbsp; | &nbsp;
                                        <a class="btn btn-danger" onclick="HandleDelete(${i.id})">Delete</a>
                                    </td>
                                </tr>
                            `
                    )
                })

                document.getElementById('datashow').innerHTML= tbl;
            }
        }
        HandleGet();


        const HandleDelete = (Did) =>{
            console.log('Crud Delete++', Did);

            const deletedata= JSON.parse(localStorage.getItem('Js-Crud'));

            if(window.confirm('Delete Your Data')){
                for (const i in deletedata) {
                    if (deletedata[i].id == Did) {
                        deletedata.splice(i, 1);
                    }
                    localStorage.setItem('Js-Crud', JSON.stringify(deletedata));
                }
            }

            HandleGet();
        } 


        const HandleEdit = (Eid) =>{
            console.log('Crud Edit Id++', Eid);

            const editdata= JSON.parse(localStorage.getItem('Js-Crud'));

            for(const i in editdata){
                if(editdata[i].id == Eid){
                    console.log('Crud Edit++', editdata[i]);
                    localStorage.setItem('Js-Crud-Edit', JSON.stringify(editdata[i]))
                }
            }

            window.location.href= "update.html";
        }

    </script>
</body>

</html>